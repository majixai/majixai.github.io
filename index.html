<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MajixAI Project Directory Menu</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- W3CSS CDN -->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    body, html {
      height: 100%;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
      overflow-x: hidden;
    }
    .parallax {
      background-image: url('https://www.transparenttextures.com/patterns/diamond-upholstery.png');
      min-height: 300px;
      background-attachment: fixed;
      background-position: center;
      background-repeat: repeat;
      background-size: cover;
    }
    .project-card {
      transition: transform 0.3s cubic-bezier(.25,.8,.25,1), box-shadow 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border-radius: 1rem;
      overflow: hidden;
      background: #fff;
      position: relative;
    }
    .project-card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
      z-index: 2;
    }
    .project-svg {
      width: 100%;
      height: 80px;
      display: block;
      background: linear-gradient(90deg, #e0eafc 0%, #cfdef3 100%);
    }
    .project-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0.5rem 0 0.2rem 0;
      color: #2a3a4a;
      text-align: center;
    }
    .project-desc {
      font-size: 0.95rem;
      color: #555;
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .animated-bg {
      animation: bgmove 8s linear infinite alternate;
    }
    @keyframes bgmove {
      0% { background-position: 0 0; }
      100% { background-position: 100px 100px; }
    }
    .menu-header {
      background: rgba(44,62,80,0.95);
      color: #fff;
      padding: 2rem 0 1rem 0;
      text-align: center;
      letter-spacing: 0.1em;
      font-size: 2.2rem;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .w3-animate-opacity { animation: opac 1.2s; }
    @keyframes opac { from {opacity:0} to {opacity:1} }
    .project-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin: 2rem auto;
      max-width: 1400px;
    }
    .project-card {
      flex: 1 1 260px;
      min-width: 260px;
      max-width: 320px;
      margin: 0.5rem;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      border: 1px solid #e0eafc;
    }
    .svg-anim {
      cursor: pointer;
      transition: filter 0.3s;
    }
    .svg-anim:hover {
      filter: drop-shadow(0 0 8px #6ec6ff);
    }
    .footer {
      text-align: center;
      color: #888;
      padding: 1.5rem 0 0.5rem 0;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <div class="parallax w3-animate-opacity">
    <div class="menu-header">MajixAI Project Directory Menu</div>
  </div>
  <main>
    <div class="container-fluid">
      <div id="projectGrid" class="project-grid"></div>
    </div>
  </main>
  <div class="footer">&copy; 2025 MajixAI | <span id="projectCount"></span> Projects</div>
  <script>
    // --- OOP, Decorators, Iterators, Generators, Async, IndexedDB, SVG, Animations ---
    // Directory/project data (static for now, could be loaded async from server or indexedDB)
    const PROJECTS = [
      { name: 'BoxStore Returns', path: 'boxstore/', desc: 'Returns policy for BoxStore' },
      { name: '7t', path: '7t/', desc: 'Experimental text and alpha tools' },
      { name: 'best', path: 'best/', desc: 'Best strategies and alpha' },
      { name: 'beta', path: 'beta/', desc: 'Beta features and scripts' },
      { name: 'chat', path: 'chat/', desc: 'Chat and indicators' },
      { name: 'chaturbate_app', path: 'chaturbate_app/', desc: 'Chaturbate event handlers' },
      { name: 'church_school_lesson_plan', path: 'church_school_lesson_plan/', desc: 'Church school lesson plans' },
      { name: 'csv', path: 'csv/', desc: 'Stock CSV data' },
      { name: 'etrade_client', path: 'etrade_client/', desc: 'Etrade API client' },
      { name: 'Gridiron', path: 'Gridiron/', desc: 'Football analytics' },
      { name: 'jinx', path: 'jinx/', desc: 'Jinx core' },
      { name: 'jinx_strategy', path: 'jinx_strategy/', desc: 'Jinx strategies' },
      { name: 'jinxcasino', path: 'jinxcasino/', desc: 'Jinx casino' },
      { name: 'json', path: 'json/', desc: 'JSON data' },
      { name: 'link_indexer', path: 'link_indexer/', desc: 'Link indexer' },
      { name: 'market', path: 'market/', desc: 'Market tools' },
      { name: 'nfl', path: 'nfl/', desc: 'NFL data' },
      { name: 'nfl_offensive_playbook', path: 'nfl_offensive_playbook/', desc: 'NFL playbook' },
      { name: 'option', path: 'option/', desc: 'Options tools' },
      { name: 'options', path: 'options/', desc: 'Options strategies' },
      { name: 'pj', path: 'pj/', desc: 'PJ tools' },
      { name: 'playbook', path: 'playbook/', desc: 'Football playbook' },
      { name: 'playbook_app', path: 'playbook_app/', desc: 'Playbook app' },
      { name: 'referrals', path: 'referrals/', desc: 'Referral system' },
      { name: 'script', path: 'script/', desc: 'Scripts' },
      { name: 'seventy', path: 'seventy/', desc: 'Seventy tools' },
      { name: 'simple', path: 'simple/', desc: 'Simple tools' },
      { name: 'stays', path: 'stays/', desc: 'Stay management' },
      { name: 'stock', path: 'stock/', desc: 'Stock tools' },
      { name: 'stock_analyzer', path: 'stock_analyzer/', desc: 'Stock analyzer' },
      { name: 'stock_fetcher', path: 'stock_fetcher/', desc: 'Stock fetcher' },
      { name: 'study', path: 'study/', desc: 'Study tools' },
      { name: 'style', path: 'style/', desc: 'Style resources' },
      { name: 'texas_holdem', path: 'texas_holdem/', desc: 'Texas Holdem' },
      { name: 'ticker', path: 'ticker/', desc: 'Ticker tools' },
      { name: 'tickers', path: 'tickers/', desc: 'Tickers' },
      { name: 'Trades', path: 'Trades/', desc: 'Trade logs' },
      { name: 'whatsapp_integration', path: 'whatsapp_integration/', desc: 'WhatsApp integration' },
    ];

    // --- Decorator Example ---
    function logMethod(target, key, descriptor) {
      const original = descriptor.value;
      descriptor.value = function(...args) {
        console.log(`[LOG] ${key} called with`, args);
        return original.apply(this, args);
      };
      return descriptor;
    }

    // --- IndexedDB Helper (Async, Static, Private) ---
    class ProjectDB {
      static #dbName = 'MajixAIProjects';
      static #store = 'projects';
      static #dbVersion = 1;
      static #db = null;
      static async open() {
        return new Promise((resolve, reject) => {
          const req = indexedDB.open(ProjectDB.#dbName, ProjectDB.#dbVersion);
          req.onupgradeneeded = e => {
            const db = e.target.result;
            if (!db.objectStoreNames.contains(ProjectDB.#store)) {
              db.createObjectStore(ProjectDB.#store, { keyPath: 'name' });
            }
          };
          req.onsuccess = e => {
            ProjectDB.#db = e.target.result;
            resolve(ProjectDB.#db);
          };
          req.onerror = e => reject(e);
        });
      }
      static async saveProjects(projects) {
        await ProjectDB.open();
        return new Promise((resolve, reject) => {
          const tx = ProjectDB.#db.transaction(ProjectDB.#store, 'readwrite');
          const store = tx.objectStore(ProjectDB.#store);
          projects.forEach(p => store.put(p));
          tx.oncomplete = () => resolve();
          tx.onerror = e => reject(e);
        });
      }
      static async getProjects() {
        await ProjectDB.open();
        return new Promise((resolve, reject) => {
          const tx = ProjectDB.#db.transaction(ProjectDB.#store, 'readonly');
          const store = tx.objectStore(ProjectDB.#store);
          const req = store.getAll();
          req.onsuccess = e => resolve(e.target.result);
          req.onerror = e => reject(e);
        });
      }
    }

    // --- Project Card Class (OOP, static, public/protected/private, iterator/generator) ---
    class ProjectCard {
      static svgIcons = [
        // SVG icon strings
        '<svg class="svg-anim" viewBox="0 0 80 80"><circle cx="40" cy="40" r="30" fill="#6ec6ff"><animate attributeName="r" values="30;35;30" dur="2s" repeatCount="indefinite"/></circle></svg>',
        '<svg class="svg-anim" viewBox="0 0 80 80"><rect x="15" y="15" width="50" height="50" rx="12" fill="#ffd166"><animate attributeName="rx" values="12;30;12" dur="2s" repeatCount="indefinite"/></rect></svg>',
        '<svg class="svg-anim" viewBox="0 0 80 80"><polygon points="40,10 70,70 10,70" fill="#06d6a0"><animate attributeName="points" values="40,10 70,70 10,70;40,20 70,60 10,60;40,10 70,70 10,70" dur="2s" repeatCount="indefinite"/></polygon></svg>',
      ];
      #project;
      #iconIdx;
      constructor(project, iconIdx = 0) {
        this.#project = project;
        this.#iconIdx = iconIdx;
      }
      get name() { return this.#project.name; }
      get path() { return this.#project.path; }
      get desc() { return this.#project.desc; }
      get icon() { return ProjectCard.svgIcons[this.#iconIdx % ProjectCard.svgIcons.length]; }
      // --- Decorated method ---
      @logMethod
      render() {
        const card = document.createElement('div');
        card.className = 'project-card w3-animate-opacity';
        card.innerHTML = `
          <a href="${this.path}" style="text-decoration:none; color:inherit;">
            <div class="project-svg animated-bg">${this.icon}</div>
            <div class="project-title">${this.name}</div>
            <div class="project-desc">${this.desc}</div>
          </a>
        `;
        return card;
      }
      // --- Iterator for subprojects (if any) ---
      *subprojects() {
        if (this.#project.subprojects) {
          for (const sp of this.#project.subprojects) yield sp;
        }
      }
    }

    // --- Generator for project cards ---
    function* projectCardGenerator(projects) {
      let idx = 0;
      for (const p of projects) {
        yield new ProjectCard(p, idx++);
      }
    }

    // --- Async function to load projects (IndexedDB fallback) ---
    async function loadProjects() {
      let projects = await ProjectDB.getProjects().catch(() => []);
      if (!projects || !projects.length) {
        projects = PROJECTS;
        await ProjectDB.saveProjects(projects);
      }
      return projects;
    }

    // --- Animation control (start/stop) ---
    let animating = true;
    function toggleAnimations() {
      animating = !animating;
      $(".svg-anim animate").each(function() {
        this[animating ? 'beginElement' : 'endElement'] && this[animating ? 'beginElement' : 'endElement']();
      });
      $(".animated-bg").css('animation-play-state', animating ? 'running' : 'paused');
    }

    // --- Main render logic ---
    $(async function() {
      const projects = await loadProjects();
      const grid = document.getElementById('projectGrid');
      const gen = projectCardGenerator(projects);
      for (const card of gen) {
        grid.appendChild(card.render());
      }
      $('#projectCount').text(projects.length);
      // Animation toggle on header click
      $('.menu-header').on('click', toggleAnimations);
    });
  </script>
</body>
</html>
