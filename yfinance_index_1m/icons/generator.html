<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Generate PWA Icons</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        h1 { color: #667eea; }
        button { background: #667eea; color: white; border: none; padding: 15px 30px; font-size: 16px; cursor: pointer; border-radius: 5px; margin: 10px 5px; }
        button:hover { background: #5568d3; }
        #status { margin-top: 20px; padding: 15px; background: #f0f4ff; border-radius: 5px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        canvas { display: none; }
        .preview { display: inline-block; margin: 10px; text-align: center; }
        .preview img { border: 1px solid #ddd; border-radius: 5px; }
        .preview p { margin: 5px 0; font-size: 12px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š YFinance PWA Icon Generator</h1>
        <p>Generate all required icon sizes for the Progressive Web App</p>
        
        <button onclick="generateIcons()">Generate All Icons</button>
        <button onclick="downloadAll()">Download All</button>
        
        <div id="status"></div>
        <div id="preview"></div>
    </div>
    
    <canvas id="canvas"></canvas>
    
    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 256, 384, 512];
        const generatedIcons = {};
        
        function generateIcon(size) {
            const canvas = document.getElementById('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            
            // Gradient background
            const gradient = ctx.createLinearGradient(0, 0, size, size);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);
            
            // Draw chart icon
            ctx.strokeStyle = 'white';
            ctx.lineWidth = size / 20;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            // Candlestick chart representation
            const padding = size * 0.2;
            const width = size - (padding * 2);
            const height = size - (padding * 2);
            
            // Draw bars
            const bars = 4;
            const barWidth = width / (bars * 2);
            
            for (let i = 0; i < bars; i++) {
                const x = padding + (i * (width / bars)) + barWidth / 2;
                const barHeight = height * (0.3 + Math.random() * 0.4);
                const y = padding + height - barHeight;
                
                // Vertical line
                ctx.beginPath();
                ctx.moveTo(x, padding + height * 0.2);
                ctx.lineTo(x, padding + height * 0.9);
                ctx.stroke();
                
                // Rectangle
                ctx.fillStyle = i % 2 === 0 ? '#10b981' : '#ef4444';
                ctx.fillRect(x - barWidth / 2, y, barWidth, barHeight);
            }
            
            // Trend line
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
            ctx.lineWidth = size / 30;
            ctx.beginPath();
            ctx.moveTo(padding, padding + height * 0.7);
            ctx.lineTo(padding + width * 0.3, padding + height * 0.5);
            ctx.lineTo(padding + width * 0.6, padding + height * 0.6);
            ctx.lineTo(padding + width, padding + height * 0.3);
            ctx.stroke();
            
            return canvas.toDataURL('image/png');
        }
        
        function generateIcons() {
            const status = document.getElementById('status');
            const preview = document.getElementById('preview');
            status.innerHTML = '<p>Generating icons...</p>';
            preview.innerHTML = '';
            
            sizes.forEach(size => {
                const dataUrl = generateIcon(size);
                generatedIcons[size] = dataUrl;
                
                const div = document.createElement('div');
                div.className = 'preview';
                div.innerHTML = `
                    <img src="${dataUrl}" width="${Math.min(size, 128)}" height="${Math.min(size, 128)}">
                    <p>${size}x${size}</p>
                    <a href="${dataUrl}" download="icon-${size}x${size}.png" style="font-size: 11px;">Download</a>
                `;
                preview.appendChild(div);
            });
            
            status.innerHTML = '<p class="success">âœ“ Generated ' + sizes.length + ' icons!</p>';
        }
        
        function downloadAll() {
            if (Object.keys(generatedIcons).length === 0) {
                alert('Please generate icons first!');
                return;
            }
            
            sizes.forEach(size => {
                const link = document.createElement('a');
                link.href = generatedIcons[size];
                link.download = `icon-${size}x${size}.png`;
                link.click();
            });
        }
        
        // Generate on load
        window.onload = generateIcons;
    </script>
</body>
</html>
