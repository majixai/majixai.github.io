<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option Strategy Visualizer (Vanilla JS)</title>

    <!-- W3.CSS Framework -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Application Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Plotly.js via CDN -->
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

    <!-- Google Analytics Snippet (Replace G-XXXXXXXXXX with your actual Measurement ID) -->
    <script async src="https://www.googletagmanager.com/gtag/js/js?id=G-XXXXXXXXXX"></script>
    <script>
      // Initialize Google Analytics Data Layer and gtag function
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      // Configure Google Analytics with your Measurement ID
      gtag('config', 'G-XXXXXXXXXX'); // <-- REPLACE THIS ID
      console.log("[Analytics] Google Analytics Snippet Initialized.");
    </script>

</head>
<body>

<div id="page-container">
    <!-- Sidebar/Menu (W3.CSS Structure) -->
    <nav class="w3-sidebar w3-bar-block w3-white w3-collapse w3-top w3-card" style="z-index:3;width:250px;" id="mySidebar">
        <div class="w3-container w3-display-container w3-padding-16">
            <i id="closeMenuButton" class="fa fa-remove w3-hide-large w3-button w3-display-topright" title="Close Menu"></i>
            <h3 class="w3-wide"><b>OPTIONS</b></h3>
        </div>
        <!-- Sidebar links will be populated by JavaScript -->
        <div id="sidebarLinks" class="w3-padding-64 w3-large w3-text-grey" style="font-weight:bold">
            <!-- Links injected here by JS -->
        </div>
    </nav>

    <!-- Top menu on small screens -->
    <header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
        <div class="w3-bar-item w3-padding-24 w3-wide">OPTIONS</div>
        <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" id="openMenuButton"><i class="fa fa-bars"></i></a>
    </header>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div id="main-content-wrapper" class="main-content-area">

        <!-- Push down content on small screens -->
        <div class="w3-hide-large main-content-area-padded-top"></div>

        <!-- Top header -->
        <header class="w3-container w3-xlarge w3-padding-24">
            <span class="w3-left">Option Strategy Visualizer</span>
            <!-- Status Indicators will be added here by JS -->
            <span id="statusIndicators" class="w3-right w3-medium"></span>
        </header>

        <!-- Main Content Area (Populated by JS) -->
        <div class="w3-container main-content-padding">
            <!-- Refresh Button and Last Updated Info -->
            <button id="refreshDataButton" class="w3-button w3-blue w3-small action-button" title="Fetch fresh data">
                <i class="fa fa-refresh"></i> Refresh Data
            </button>
            <span id="lastUpdated" class="w3-small w3-text-grey"></span>

             <!-- Status Message Area -->
             <div id="statusMessageArea"></div>

             <!-- Dynamic Content Container - Contains sections -->
            <div id="contentContainer" class="w3-container w3-padding-16">
                <!-- Strategy Sections will be injected here by JS -->
                <!-- The showSection JS function will handle displaying one at a time -->
                <div id="about" class="strategy-section" style="display:none;"></div>
                <div id="oneLeg" class="strategy-section" style="display:none;"></div>
                <div id="twoLeg" class="strategy-section" style="display:none;"></div>
                <div id="threeLeg" class="strategy-section" style="display:none;"></div>
                <div id="fourLeg" class="strategy-section" style="display:none;"></div>
                 <div id="multiLeg" class="strategy-section" style="display:none;"></div>
                <!-- Add more sections here if needed -->
            </div>
        </div>

    </div> <!-- End main-content-wrapper -->

    <!-- Footer -->
    <footer id="app-footer">
        <p>Disclaimer: Educational purposes only. Option trading involves risk. Consult a professional.</p>
        <p>Data persistence via IndexedDB & Cache API. Analytics via Google Analytics (if configured).</p>
        <p>Built with Vanilla JS, W3.CSS, Font Awesome, Plotly.js.</p>
    </footer>

</div> <!-- End page-container -->

    <!-- Link to the main JavaScript file -->
    <script src="script.js"></script>

</body>
</html>
